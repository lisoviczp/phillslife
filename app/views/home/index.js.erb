// Implementing infinite scrolling and calling masonry again on the newly added pictures.

$(document).ready(function() {
	$('#pictures').append("<%= escape_javascript render 'pictures' %>");
	$('.pagination').replaceWith("<%= escape_javascript will_paginate @pictures %>");

    var $container = $('#pictures');   
    $container.imagesLoaded( function() {
    	$container.isotope({ sortBy: 'original-order' })	
        $container.masonry({
            itemSelector: '.fancybox',
	    	columnWidth: 320    
        });
		$container.isotope({
			// options...
			itemSelector: '.fancybox',
			sortBy: 'original-order',
			masonry: {
				columnWidth: 320
			}
		});
        $container.masonry('reloadItems');
    });
})
